{% extends 'codedoor/base.html' %}
{% load static from staticfiles %}
{% block content %}
<head>
    <link rel="stylesheet" href="{% static 'css/application.css' %}">
    <link rel="stylesheet" href="{% static 'css/question.css' %}">
    
</head>
<body>
  <textarea id="pk" style="display: none;">{{ a.pk }}</textarea><br>
  <div class="entry">
    <table>
      <tr>
        {% if a.company.logo != null %}
          <td rowspan="3" width="7%">
            <img src="{{ a.company.logo }}" alt="Company logo" width="100" height="100">
          </td>
        {% else %}
          <td rowspan="3" width="7%">
            <img src="/static/images/temp.png" alt="Company logo" width="100" height="100">
          </td>
        {% endif %}
        <td width="93%">
          <a href="{% url 'codedoor:viewcompany' pk=a.company.pk %}">
            <h2 class="link-text">{{ a.company }}</h2>
          </a>
          <span class="applicant-name">{{ a.profile }}</span>
        </td>
      </tr>
      <tr>
        <td>
          <p><span class="info job-position">{{a.position}}</span>
          <span class="info job-season">{{a.season}} {{a.year}}-San Francisco, CA</span></p>
        </td>
      </tr>
      <tr>
        <td>
          <p><span class="info colorful-boxy">
            {% if a.received_offer %}
              <span>
                <svg width="15" height="15">
                <rect x="0" y="0" rx="3" ry="3" width="15" height="15"
                style="fill:#01959b" />
                </svg> Received Offer
              </span>
            {% else %}
              <span>
                <svg width="15" height="15">
                <rect x="0" y="0" rx="3" ry="3" width="15" height="15"
                style="fill:#ff4d4d" />
                </svg> No Offer
              </span>
            {% endif %}
          </span>
          <span class="info colorful-boxy">
            {% if a.difficult > 7 %}
              <span>
                <svg width="15" height="15">
                <rect x="0" y="0" rx="3" ry="3" width="15" height="15"
                style="fill:#ff4d4d" />
                </svg>&nbsp;&nbsp;Difficult Interview: {{a.difficult}}/10
              </span>
            {% elif a.difficult < 4 %}
              <span>
                <svg width="15" height="15">
                <rect x="0" y="0" rx="3" ry="3" width="15" height="15"
                style="fill:#01959b" />
                </svg>&nbsp;&nbsp;Easy Interview: {{a.difficult}}/10
              </span>
            {% else %}
              <span>
                <svg width="15" height="15">
                <rect x="0" y="0" rx="3" ry="3" width="15" height="15"
                style="fill:#FF9B71;" />
                </svg>&nbsp;&nbsp;Average Interview: {{a.difficult}}/10
              </span>
            {% endif %}
          </span></p>
        </td>
      </tr>
      <tr>
        <td></td>
        <td>
          <h4>Description:</h4>
          <p>{{a.description}}</p>
        </td>
      </tr>
      <tr>
        <td></td>
        <td>
          <h4>Offer details:</h4>
          <p>{{a.offer_details}}</p>
        </td>
      </tr>
    </table>
    <br><br>
        {% if request.user.profile == profile %}
          <button class="sub" onclick="displayQuestionForm()">Create Question</button>
          <a class="sub" href="{% url 'codedoor:edit_application' pk=a.pk %}">Edit Application</a>
        {% endif %}
    <br><br>
    <div id="hidden" style="display: none;">
      <div class="entry">
          <h4>Question:</h4><br>
          <textarea id="question" name="question" placeholder="Question here"></textarea><br>
      </div>
      <div class="entry">
          <h4>Applicant Answer:</h4><br>
          <textarea id="applicant_answer" name="applicant answer" placeholder="Your answer"></textarea><br>
      </div>
      <div class="entry">
          <h4>Company Answer:</h4><br>
          <textarea id="company_answer" name="company answer" placeholder="Company answer"></textarea><br><br>
      </div>
      <div class="entry">
          <button id="submit_button" type="submit" class="big" onclick="displayQuestionForm()">Submit</button>
      </div>
  </div>
    <br><br><br>
    <h2>Questions</h2>
    {% if questions %}
        <div id="questList">
        {% for q in questions %}
            <div class="post">
                <h4 class="blue-text">Question</h4>
                <p>{{ q.question }}</p>
                <h4 class="blue-text">Applicant answer</h4>
                <p>{{ q.applicant_answer }}</p>
                <h4 class="blue-text">Company answer</h4>
                <p>{{ q.actual_answer }}</p>
                <br><br>
            </div>
        {% endfor %}
        </div>
    {% else %}
        <p>No questions yet!</p>
    {% endif %}
  </div>
  <script src="{% static 'js/createquestion.js' %}"></script>
</body>
{% endblock %}
